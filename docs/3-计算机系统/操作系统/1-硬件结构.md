## 1. CPU是如何执行程序的？
### 1.1 图灵机的工作方式
图灵机的基本组成：
- 一条**纸带**
- 一个**读写头**
	- 读写头上有一些部件：
		- 存储单元：用于存放数据
		- 控制单元：控制单元用于识别字符是数据还是指令，以及控制程序的流程
		- 运算单元：执行运算指令

图灵机主要功能就是读取**纸带**格子中的内容，然后交给**控制单元**识别字符是数字还是运算符指令，如果是数字则存入到**存储单元**中，如果是运算符，则通知**运算单元**读取状态中的数值进行计算，计算结果最终返回给**读写头**，**读写头**把结果写入到**纸带**的格子中。

### 1.2 冯诺依曼模型
计算机基本结构为 5 个部分：
- 运算器：在CPU中
- 控制器：在CPU中
- 存储器：就我们常见的内存
- 输入设备：键盘就是输入设备
- 输出设备：显示器就是输出设备

这些部件之间通过总线连接起来：
![](../../img/Pasted%20image%2020221209134527.png)

现代设备中的一些概念：
- 内存
	- 我们的程序和数据主要是存储在内存中的，存储的区域是**线性**的
	- 存数据的基本单位是**字节（Byte）**，每一个字节对应一个内存地址
	- 内存的地址是从0开始编号的
- 中央处理器
	- 32位和64位CPU的主要区别在于一次能计算多少字节数据
		- 32位CPU一次能计算4个字节
		- 64位CPU一次能计算8个字节
	- CPU内部有一些组件
		- 寄存器：存储计算时用的值
			- 通用寄存器
			- 程序计数器：用来存储 CPU 要执行下一条指令「所在的内存地址」
			- 指令寄存器：用来存放当前正在执行的指令，也就是指令本身
		- 控制单元
		- 逻辑运算单元
- 总线：负责CPU和内存以及其他设备之间的通信
	-   首先要通过「地址总线」来指定内存的地址
	-   然后通过「控制总线」控制是读或写命令
	-   最后通过「数据总线」来传输数据
- 输入输出设备

### 1.3 线路位宽与CPU位宽
线路位宽：
- 就是线路并行的量

CPU位宽：
- 就是CPU一次计算的量

但是并不代表 64 位 CPU 性能比 32 位 CPU 高很多，很少应用需要算超过 32 位的数字，所以**如果计算的数额不超过 32 位数字的情况下，32 位和 64 位 CPU 之间没什么区别的，只有当计算超过 32 位数字的情况下，64 位的优势才能体现出来**。


### 1.4 程序执行的基本过程
CPU 执行程序的过程如下：
- CPU 读取「程序计数器」的值，这个值是指令的内存地址，然后 CPU 的「控制单元」操作「地址总线」指定需要访问的内存地址，接着通知内存设备准备数据，数据准备好后通过「数据总线」将指令数据传给 CPU，CPU 收到内存传来的数据后，将这个指令数据存入到「指令寄存器」
- 「程序计数器」的值自增，表示指向下一条指令。这个自增的大小，由 CPU 的位宽决定，比如 32 位的 CPU，指令是 4 个字节，需要 4 个内存地址存放，因此「程序计数器」的值会自增 4；
- CPU 分析「指令寄存器」中的指令，确定指令的类型和参数，如果是计算类型的指令，就把指令交给「逻辑运算单元」运算；如果是存储类型的指令，则交由「控制单元」执行；

简单总结一下就是，一个程序执行的时候，CPU 会根据程序计数器里的内存地址，从内存里面把需要执行的指令读取到指令寄存器里面执行，然后根据指令长度自增，开始顺序读取下一条指令。

CPU 从程序计数器读取指令、到执行、再到下一条指令，这个过程会不断循环，直到程序执行结束，这个不断循环的过程被称为 **CPU 的指令周期**。

### 1.5 一条指令的执行具体过程



### 1.6 总结
- 64 位相比 32 位 CPU 的优势在哪吗？
	- 64 位 CPU 可以**一次计算超过 32 位的数字**
	- 64 位 CPU 可以**寻址更大的内存空间**
- 64 位 CPU 的计算性能一定比 32 位 CPU 高很多吗？
	- **只有运算大数字的时候，64 位 CPU 的优势才能体现出来，否则和 32 位 CPU 的计算性能相差不大**。
- 你知道软件的 32 位和 64 位之间的区别吗？
	- 64 位和 32 位软件，实际上代表指令是 64 位还是 32 位的：
	- `gcc -m32` 就能在64位机器上编译出32位的软件的了。
-  32 位的操作系统可以运行在 64 位的电脑上吗？
	- 如果 32 位指令在 64 位机器上执行，需要一套兼容机制，就可以做到兼容运行了。但是**如果 64 位指令在 32 位机器上执行，就比较困难了，因为 32 位的寄存器存不下 64 位的指令**；
	- 总之，硬件的 64 位和 32 位指的是 CPU 的位宽，软件的 64 位和 32 位指的是指令的位宽。


